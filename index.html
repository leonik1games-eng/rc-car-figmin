<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SS Play RC - Final Controls</title>
    <meta name="figmin">
    <style>
        body {
            background: transparent;
            font-family: sans-serif;
            text-align: center;
            overflow: hidden;
            margin: 0;
            pointer-events: none;
        }
        .hud {
            position: fixed; top: 20px; left: 20px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid #00ff00;
            color: #fff;
            padding: 20px;
            border-radius: 15px;
            text-align: left;
            pointer-events: auto;
            width: 280px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .stat { color: #00ff00; font-weight: bold; font-size: 18px; }
        .controls { margin-top: 15px; font-size: 14px; color: #ccc; line-height: 1.6; }
        b { color: #fff; }
    </style>
</head>
<body>

    <div class="hud">
        <h3 style="margin:0; color:#00ff00;">SS PLAY RC <span style="font-size:12px; color:#fff;">v16.0</span></h3>
        <div id="status" class="stat">Procurando carro...</div>
        <hr style="border-color:#333">
        <div class="controls">
            üëâ <b>Gatilho DIR (R2):</b> Acelerar<br>
            üëà <b>Gatilho ESQ (L2):</b> R√© / Freio<br>
            üïπÔ∏è <b>Anal√≥gico DIR:</b> Dire√ß√£o (Lados)<br>
            üõë <b>Bot√£o A:</b> Resetar
        </div>
        <div style="margin-top:10px; font-size:11px; color:#666; border-top:1px solid #333; padding-top:5px;">
            R√© no anal√≥gico: DESATIVADA
        </div>
    </div>

    <script>
        // --- AJUSTES DE PILOTAGEM ---
        const FORCA_MOTOR = 100.0;    // For√ßa do motor
        const VEL_CURVA = 3.5;        // Velocidade da curva
        const PESO = 3.0;             // Peso do carro (kg)
        
        // Mude para 'true' APENAS se o carro andar de lado sozinho
        const MODELO_DE_LADO = false; 
        // ----------------------------

        var car = null;
        var statusDiv = document.getElementById("status");

        // Fun√ß√£o de Vetor Local (Para o carro andar pra frente dele mesmo)
        function getForwardVector(q) {
            const x = q.x, y = q.y, z = q.z, w = q.w;
            if (MODELO_DE_LADO) {
                return { // Frente no Eixo X
                    x: 1 - 2 * (y * y + z * z),
                    y: 2 * (x * y + w * z),
                    z: 2 * (x * z - w * y)
                };
            } else {
                return { // Frente no Eixo Z (Padr√£o)
                    x: 2 * (x * z + w * y),
                    y: 2 * (y * z - w * x),
                    z: 1 - 2 * (x * x + y * y)
                };
            }
        }

        document.addEventListener("FigminReady", function() {
            car = figmin
